//Sets the amount of chapters
$chapterLength: 26;

//Defines colors for print
$blue: #004B93;

// Spacing
$space-1: 2.5mm;
$space-2: 5mm;
$space-3: 10mm; 
$space-4: 20mm;

// Typography
$font-sans: source-sans-pro, sans;
$font-serif: TimesNewRoman, "Times New Roman", Times, Baskerville, Georgia, serif;

// Typescale
$h1:;
$h2:;
$h3:;
$h4:;
$h5:;
$h6:;

// Fonts
@font-face {
	font-family: source-sans-pro;
	src: url(../fonts/SourceSansPro-Regular.ttf);
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: source-sans-pro;
	src: url(../fonts/SourceSansPro-Italic.ttf);
	font-weight: normal;
	font-style: italic;
}

@font-face {
	font-family: source-sans-pro;
	src: url(../fonts/SourceSansPro-SemiBold.ttf);
	font-weight: 700;
	font-style: normal;
}

// Normalize
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
menu,
nav,
section,
summary {
  display: block;
}

@media print {

	/*@prince-pdf {
		prince-pdf-page-layout: two-column
	}*/

	html {
		box-sizing: border-box;
	}
	
	*, *:before, *:after {
		box-sizing: inherit;
	}

	body {
		font-family: serif;
		font-size: 10pt;
		line-height: 1.35;
	}

	h1, h2, h3, h4, h5, h6 {
		display: block;
		font-family: $font-sans;
		-webkit-print-color-adjust: exact;
		page-break-after: avoid;
	}

	h1 {
		font-size: 24pt;
		column-span: all;
		margin-bottom: $space-1;
		page-break-before: always;
		line-height: 1.125;
		color: black;
	}

	h2 {
		font-size: 18pt;
		line-height: 1.125;
		color: $blue;
		margin: $space-2 0 $space-1;
		page-break-inside: avoid;
	}

	h3 {
		font-size: 12pt;
		line-height: 1.25;
		margin: $space-1 0;
		page-break-inside: avoid;
	}

	h4 {
		color: $blue;
		margin: $space-1 0;
		page-break-inside: avoid;
	}

	h5, h6 {
		font-size: 10pt;
		margin: $space-1 0;
		color: $blue;
		page-break-inside: avoid;
	}
	
	a {
		word-wrap: break-word;
	}
	
	// Show the actual link
	a:link:after, 
	a:visited:after { 
		content: " ("attr(href)")";
	}

	p {
		display: block;
		margin: $space-1 0;
		// text-align: justify;
		hyphens: auto;
		widows: 3;
	}

	ul, ol {
		margin: $space-1 0;
		// page-break-inside: avoid; 
		padding: 0 $space-2; 

		li {
			padding: 0;
			margin: $space-1 0;
		}
	}

	table {
		// table-layout: fixed;
		font-family: $font-sans;
		page-break-inside: avoid;
		margin: $space-1 0;
		column-span: none;
	}

	// Override inline styles of tables that tinymce generates.
	table[style] {
		width: 100% !important;
		max-width: 100% !important;
		height: auto !important;
	}

	tr[style], 
	td[style],
	thead[style],
	tbody[style] {
		width: auto !important;
		height: auto !important;
	}

	img {
		max-width: 100%;
		height: auto;
		page-break-inside: avoid;
	}

	figcaption {
		font-family: $font-sans;
		font-style: italic;
		font-size: 8pt;
	}

	// .wp-caption div is generated by Wordpress. Contains image and caption.
	.wp-caption {
		max-width: 100%;
		height: auto;
		page-break-inside: avoid;
		
		img {
			max-width:100%;
			height: auto;
			page-break-inside: avoid; 
		}
		
		.wp-caption-text {
			margin: 0 0 $space-1;
			font-family: $font-sans;
			font-style: italic;
			font-size: 8pt;
		}
	}



	//Set column-count, inner padding and chapter counter - Needs review
	.main {
		column-count: 2;
		column-gap: $space-3;
		padding: $space-2;
		position: relative;
	}

	table, tr, td {
		width: 100%;
		box-sizing: border-box;
		font-size: 10pt;
		border: 1px solid #e5e5e5;
		border-collapse: collapse;
	}

	thead,
	th {
		text-transform: uppercase;
		background: $blue;
		color: white;
		text-align: center;
	}

	tbody tr:nth-child(odd) {
		background: #f5f5f5;
	}

	td {
		padding: 1px 2px;
		word-wrap: break-word;
		overflow-wrap: break-word;
	}

	//Increments chapter for every chapter section <div class="section"> in document and fetches chapter name from PrinceXML's string-set function
	.section {
		counter-increment: chapter;
		h1 {
			string-set: chapterName content();
			&::before {
				content: 'Kapitel ' counter(chapter) ' · '; 
			} 
		}
	}

	//Styles for chapter marker
    .chapter-header {
        flow: static(chapterHeader);
        content: counter(chapter); 
        font-size:12pt;
        font-family: source-sans-pro;
        text-align: center;
        padding:0.33em;
        font-weight:bold;
        color:white;
        background-color:$blue;
    }

	//Adjusts margins for print
	@page :left {
		margin: 15mm 25mm 15mm 10mm;
	}
	@page :right {
		margin: 15mm 10mm 15mm 25mm;
	}

	// Loops through chapters and adds page numbers, chapter title and lastly chapter number 
	// based on hardcoded chapter-number div
	@for $i from 1 through $chapterLength {
		.section:nth-child(#{$chapterLength}n + #{$i}) {
			page:chapter#{$i};
		}
		@page chapter#{$i} {
			@right-top {
				padding-top:#{$i * 0.25}cm;
			}
			@left-top{
				padding-top:#{$i * 0.25}cm;
			}
		}
		@page chapter#{$i}:left {
			@bottom-left { 
			  content: counter(page); 
			  font-family: source-sans-pro;
			  font-size:10pt;
			  font-weight:bold;
			  margin-left:5mm;
			  margin-bottom:5mm;
			}
			@left-top { 
			  content: element(chapterHeader);
			}
			@bottom-right {
			  content: 'Kapitel ' counter(chapter) ' · ' string(chapterName); 
			  font-size:10pt;
			  margin-right:5mm;
			  margin-bottom:5mm;
			  font-family: source-sans-pro;
			}
		}
		@page chapter#{$i}:right {
			@bottom-right { 
				content: counter(page);
				font-family: source-sans-pro; 
				font-size:10pt;
				font-weight:bold;
				margin-right:5mm;
				margin-bottom:5mm;
			}
			@right-top { 
				content: element(chapterHeader);
			}
			@bottom-left {
				content: 'Kapitel ' counter(chapter) ' · ' string(chapterName);
				font-family: source-sans-pro;
				font-size:10pt;
				margin-left:5mm;
				margin-bottom:5mm;
			}
		}
	}


	//Table of contents - Needs review
	.table-of-contents {
		padding:0;
		margin:10mm 0mm 0mm 0mm;
		column-count:2;
		column-gap:10mm;
		page-break-after:always;
		list-style:none;
		&__header {
			color:black;
		}
		&__chapter, &__subchapter {
			a {
				text-decoration: none;
				color:$blue;
				content: leader('.') target-counter(attr(href, url), page);
			}
		}
		&__chapter {
			font-size:10pt;
			margin-top:2mm;
			margin-bottom:2mm;
			font-family: source-sans-pro;
			font-weight:bold;
			list-style:none;
			color:$blue;
		}
		&__subchapter {
			padding-left:1em;
			font-size:10pt;
			//font-family:source-sans-pro;
		}
	}







	.image--full {
		padding: 1em;
		column-span: all;
		page-break-before: auto;
		page-break-after: auto; 
		page-break-inside: avoid;
		position: relative;
		display: block;
		width:100%;
		background: #eaeaea;
		height: 500px;
		-webkit-print-color-adjust: exact;
	}

	.image--small {
		height: 400px;
		-webkit-print-color-adjust: exact; 
		width: 100%;
		background:#eaeaea;
	}

	// Infoboxes
	.infobox--background,
	.infobox--border {
		display: inline-block;
		width: 100%;
		padding: 0 $space-1;
		page-break-inside: avoid;
	}

	.infobox--background {
		background: #ddeef9;
	}

	.infobox--border {
		border: 3px solid #00579d;
	}

	.infobox--elderly {
		background: #f0f4ed;
		page-break-inside: avoid;
	
		.infobox__header {
			background: #438011;
			color: #fff;
		}
	}
	
	.infobox--children {
		background: #faf5ea;
		page-break-inside: avoid;
	
		.infobox__header {
			background: #fdb813;      
		}
	}
	
	.infobox__header {
		text-align: center;
		text-transform: uppercase;
		font-weight: 700;
		font-family: $font-sans;
	}
	
	.infobox__content {
		padding: $space-1;
	}

	// Utilities
	.column-span-all  { column-span: all !important;  }
	.column-span-none { column-span: none !important; }

	.figurecomment { display: none !important; }
}

/* COMPONENTS */
ul.segment {
	list-style: none;
	border:1px solid #eaeaea;
	padding:0;
	margin:0;
	li:first-child{
		font-family: $font-sans;
		text-align: center;
		background:$blue;
		color:white;
		text-transform: uppercase;
		padding:20px;
		margin:0;
		font-size:14px;
	}li{
		padding-left: 20px;
	}
}