!function(){var e={},t=function(t,n,o){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===o)throw"no definition function for "+t;e[t]={deps:n,defn:o,instance:void 0}},n=function(t){var o=e[t];if(void 0===o)throw"module ["+t+"] was undefined";return void 0===o.instance&&function(t){for(var o=e[t],r=o.deps,l=o.defn,a=r.length,i=new Array(a),c=0;c<a;++c)i[c]=n(r[c]);var s=l.apply(null,i);if(void 0===s)throw"module ["+t+"] returned undefined";o.instance=s}(t),o.instance},o=function(e,t){for(var o=e.length,r=new Array(o),l=0;l<o;++l)r.push(n(e[l]));t.apply(null,t)};({}).bolt={module:{api:{define:t,require:o,demand:n}}};var r=t;!function(e,t){r(e,[],function(){return t})}("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),r("tinymce.core.dom.TreeWalker",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.TreeWalker")}),r("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),r("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),r("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),r("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),r("tinymce.plugins.table.util.Utils",["tinymce.core.Env"],function(e){var t=function(e){return function(t,n){t&&(1===(n=parseInt(n,10))||0===n?t.removeAttribute(e,1):t.setAttribute(e,n,1))}},n=function(e){return function(t){return parseInt(t.getAttribute(e)||1,10)}};return{setColSpan:t("colSpan"),setRowSpan:t("rowspan"),getColSpan:n("colSpan"),getRowSpan:n("rowSpan"),setSpanVal:function(e,n,o){t(n)(e,o)},getSpanVal:function(e,t){return n(t)(e)},paddCell:function(t){(!e.ie||e.ie>9)&&(t.hasChildNodes()||(t.innerHTML='<br data-mce-bogus="1" />'))}}}),r("tinymce.plugins.table.model.SplitCols",["tinymce.core.util.Tools","tinymce.plugins.table.util.Utils"],function(e,t){var n=function(e,t,n){return e[n]?e[n][t]:null},o=function(e,t,o){var r=n(e,t,o);return r?r.elm:null},r=function(e,t,r,l){var a,i,c=0,s=o(e,t,r);for(a=r;(l>0?a<e.length:a>=0)&&(i=n(e,t,a),s===i.elm);a+=l)c++;return c},l=function(e,t,n){for(var o,r=e[n],l=t;l<r.length;l++)if((o=r[l]).real)return o.elm;return null},a=function(e,n){var o=e.elm.ownerDocument.createElement("td");return t.setColSpan(o,t.getColSpan(e.elm)),t.setRowSpan(o,n),t.paddCell(o),o},i=function(e,t,n,o){var r=l(e,n+1,o);r?r.parentNode.insertBefore(t,r):(r=l(e,0,o)).parentNode.appendChild(t)};return{splitAt:function(n,l,c,s){var u=function(e,n){for(var o,l=[],a=e[n],i=0;i<a.length;i++)o=a[i],l.push({elm:o.elm,above:r(e,i,n,-1)-1,below:r(e,i,n,1)-1}),i+=t.getColSpan(o.elm)-1;return l}(n,c),d=o(n,l,c).parentNode,f=[];return e.each(u,function(e,o){null!==(s?function(e,n,o,r){if(0!==n.above){t.setRowSpan(n.elm,n.above);var l=a(n,n.below+1);return i(e,l,o,r),l}return null}(n,e,o,c):function(e,n,o,r){if(0!==n.below){t.setRowSpan(n.elm,n.above+1);var l=a(n,n.below);return i(e,l,o,r+1),l}return null}(n,e,o,c))&&f.push(f)}),{cells:f,row:d}}}}),r("tinymce.plugins.table.model.TableGrid",["tinymce.core.util.Tools","tinymce.core.Env","tinymce.plugins.table.util.Utils","tinymce.plugins.table.model.SplitCols"],function(e,t,n,o){var r=e.each,l=n.getSpanVal,a=n.setSpanVal;return function(i,c,s){function u(){i.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function d(e){return e===i.getBody()}function f(t,n){return t?(n=e.map(n.split(","),function(e){return e.toLowerCase()}),e.grep(t.childNodes,function(t){return-1!==e.inArray(n,t.nodeName.toLowerCase())})):[]}function m(){var e=0;I=[],M=0,r(["thead","tbody","tfoot"],function(t){var n=f(f(c,t)[0],"tr");r(n,function(n,o){o+=e,r(f(n,"td,th"),function(e,n){var r,a,i,c;if(I[o])for(;I[o][n];)n++;for(i=l(e,"rowspan"),c=l(e,"colspan"),a=o;a<o+i;a++)for(I[a]||(I[a]=[]),r=n;r<n+c;r++)I[a][r]={part:t,real:a==o&&r==n,elm:e,rowspan:i,colspan:c};M=Math.max(M,n+1)})}),e+=n.length})}function g(e){return i.fire("newrow",{node:e}),e}function p(e){return i.fire("newcell",{node:e}),e}function b(e,t){return(e=e.cloneNode(t)).removeAttribute("id"),e}function h(e,t){var n;if(n=I[t])return n[e]}function v(e){return e&&(!!L.getAttrib(e.elm,"data-mce-selected")||e==s)}function y(){var e=[];return r(c.rows,function(t){r(t.cells,function(n){if(L.getAttrib(n,"data-mce-selected")||s&&n==s.elm)return e.push(t),!1})}),e}function w(o){var l,c={};return!1!==i.settings.table_clone_elements&&(c=e.makeMap((i.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),e.walk(o,function(e){var n;if(3==e.nodeType)return r(L.getParents(e.parentNode,null,o).reverse(),function(e){c[e.nodeName]&&(e=b(e,!1),l?n&&n.appendChild(e):l=n=e,n=e)}),n&&(n.innerHTML=t.ie&&t.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),o=b(o,!1),p(o),a(o,"rowSpan",1),a(o,"colSpan",1),l?o.appendChild(l):n.paddCell(o),o}function x(){var e,t=L.createRng();if(r(L.select("tr",c),function(e){0===e.cells.length&&L.remove(e)}),0===L.select("tr",c).length)return t.setStartBefore(c),t.setEndBefore(c),E.setRng(t),void L.remove(c);r(L.select("thead,tbody,tfoot",c),function(e){0===e.rows.length&&L.remove(e)}),m(),D&&(e=I[Math.min(I.length-1,D.y)])&&(E.select(e[Math.min(e.length-1,D.x)].elm,!0),E.collapse(!0))}function C(e,t,n,o){var r,l,a,i,c;for(r=I[t][e].elm.parentNode,a=1;a<=n;a++)if(r=L.getNext(r,"tr")){for(l=e;l>=0;l--)if((c=I[t+a][l].elm).parentNode==r){for(i=1;i<=o;i++)L.insertAfter(w(c),c);break}if(-1==l)for(i=1;i<=o;i++)r.insertBefore(w(r.cells[0]),r.cells[0])}}function S(){r(I,function(e,t){r(e,function(e,n){var o,r,i;if(v(e)&&(e=e.elm,o=l(e,"colspan"),r=l(e,"rowspan"),o>1||r>1)){for(a(e,"rowSpan",1),a(e,"colSpan",1),i=0;i<o-1;i++)L.insertAfter(w(e),e);C(n,t,r-1,o)}})})}function T(e,t,n){for(var o=[],r=0;r<e.length;r++)(r<t||r>n)&&o.push(e[r]);return o}function A(t){return e.grep(t,function(e){return!1===e.real})}function R(e){for(var t=[],n=0;n<e.length;n++){var o=e[n].elm;t[t.length-1]!==o&&t.push(o)}return t}function P(e){var t,n,o,i,c,s,u,d,f,m;if(r(I,function(n,o){if(r(n,function(n){if(v(n)&&(n=n.elm,c=n.parentNode,s=g(b(c,!1)),t=o,e))return!1}),e)return void 0===t}),void 0!==t){for(i=0,m=0;i<I[0].length;i+=m)if(I[t][i]&&(n=I[t][i].elm,m=l(n,"colspan"),n!=o)){if(e){if(t>0&&I[t-1][i]&&(d=I[t-1][i].elm,(f=l(d,"rowSpan"))>1)){a(d,"rowSpan",f+1);continue}}else if((f=l(n,"rowspan"))>1){a(n,"rowSpan",f+1);continue}u=w(n),a(u,"colSpan",n.colSpan),s.appendChild(u),o=n}s.hasChildNodes()&&(e?c.parentNode.insertBefore(s,c):L.insertAfter(s,c))}}function N(e){var t,n;r(I,function(n){if(r(n,function(n,o){if(v(n)&&(t=o,e))return!1}),e)return void 0===t}),r(I,function(o,r){var i,c,s;o[t]&&(i=o[t].elm)!=n&&(s=l(i,"colspan"),c=l(i,"rowspan"),1==s?e?(i.parentNode.insertBefore(w(i),i),C(t,r,c-1,s)):(L.insertAfter(w(i),i),C(t,r,c-1,s)):a(i,"colSpan",i.colSpan+1),n=i)})}function B(e){var t=[];return r(e,function(e){r(e,function(e){t.push(e)})}),t}function k(e){var t;return r(I,function(n,o){return r(n,function(n,r){if(n.elm==e)return t={x:r,y:o},!1}),!t}),t}var I,M,D,_,E=i.selection,L=E.dom;c=c||L.getParent(E.getStart(!0),"table"),m(),(s=s||L.getParent(E.getStart(!0),"th,td"))&&(D=k(s),_=function(){var e,t;return e=t=0,r(I,function(n,o){r(n,function(n,r){var l,a;v(n)&&(n=I[o][r],r>e&&(e=r),o>t&&(t=o),n.real&&(l=n.colspan-1,a=n.rowspan-1,l&&r+l>e&&(e=r+l),a&&o+a>t&&(t=o+a)))})}),{x:e,y:t}}(),s=h(D.x,D.y)),e.extend(this,{deleteTable:function(){var e=L.createRng();d(c)||(e.setStartAfter(c),e.setEndAfter(c),E.setRng(e),L.remove(c))},split:S,merge:function(t,o,l){var i,c,s,u,d,f,g,p,b,y,w,C,P;if(t?(u=(c=(i=k(t)).x)+(o-1),d=(s=i.y)+(l-1)):(D=_=null,r(I,function(e,t){r(e,function(e,n){v(e)&&(D||(D={x:n,y:t}),_={x:n,y:t})})}),D&&(c=D.x,s=D.y,u=_.x,d=_.y)),p=h(c,s),b=h(u,d),p&&b&&p.part==b.part){S(),m(),C=function(t,o,r,l,a){var i=0;if(a-r<1)return 0;for(var c=r+1;c<=a;c++){var s=T(function(e,t){return e[t]?e[t]:null}(t,c),o,l),u=A(s);s.length===u.length&&(e.each(R(u),function(e){n.setRowSpan(e,n.getRowSpan(e)-1)}),i++)}return i}(I,c,s,u,d),P=function(t,o,r,l,a){var i=0;if(l-o<1)return 0;for(var c=o+1;c<=l;c++){var s=T(function(e,t){for(var n=[],o=0;o<e.length;o++)n.push(h(t,o));return n}(t,c),r,a),u=A(s);s.length===u.length&&(e.each(R(u),function(e){n.setColSpan(e,n.getColSpan(e)-1)}),i++)}return i}(I,c,s,u,d),p=h(c,s).elm;var N=u-c-P+1,B=d-s-C+1;for(N===M&&B===I.length&&(N=1,B=1),N===M&&B>1&&(B=1),a(p,"colSpan",N),a(p,"rowSpan",B),g=s;g<=d;g++)for(f=c;f<=u;f++)I[g]&&I[g][f]&&(t=I[g][f].elm)!=p&&(y=e.grep(t.childNodes),r(y,function(e){p.appendChild(e)}),y.length&&(y=e.grep(p.childNodes),w=0,r(y,function(e){"BR"==e.nodeName&&w++<y.length-1&&p.removeChild(e)})),L.remove(t));x()}},insertRow:P,insertRows:function(e,t){t=t||y().length||1;for(var n=0;n<t;n++)P(e)},insertCol:N,insertCols:function(e,t){t=t||function(){var e=0;return r(I,function(t){if(r(t,function(t){v(t)&&e++}),e)return!1}),e}()||1;for(var n=0;n<t;n++)N(e)},splitCols:function(t){if(D){var n=o.splitAt(I,D.x,D.y,t);e.each(n.cells,p)}},deleteCols:function(){var t=[];if(d(c)){if(1==I[0].length)return;if(function(t){return e.grep(B(t),v)}(I).length==B(I).length)return}r(I,function(n){r(n,function(n,o){v(n)&&-1===e.inArray(t,o)&&(r(I,function(e){var t,n=e[o].elm;(t=l(n,"colSpan"))>1?a(n,"colSpan",t-1):L.remove(n)}),t.push(o))})}),x()},deleteRows:function(){var e;e=y(),d(c)&&e.length==c.rows.length||(r(e.reverse(),function(e){!function(e){var t,n;r(e.cells,function(e){var n=l(e,"rowSpan");n>1&&(a(e,"rowSpan",n-1),C((t=k(e)).x,t.y,1,1))}),t=k(e.cells[0]),r(I[t.y],function(e){var t;(e=e.elm)!=n&&((t=l(e,"rowSpan"))<=1?L.remove(e):a(e,"rowSpan",t-1),n=e)})}(e)}),x())},cutRows:function(){var e=y();if(!d(c)||e.length!=c.rows.length)return L.remove(e),e},copyRows:function(){var e=y();return r(e,function(t,n){e[n]=b(t,!0)}),e},pasteRows:function(t,n){var i,c,s,d=[];t&&(i=o.splitAt(I,D.x,D.y,n),c=i.row,e.each(i.cells,p),s=e.map(t,function(e){return e.cloneNode(!0)}),r(s,function(e,t,o){var i,s,u,f,m=e.cells.length,b=0;for(g(e),i=0;i<m;i++)s=e.cells[i],f=l(s,"colspan"),u=l(s,"rowspan"),b+=f,u>1&&(b--,t+u>o.length?(u=o.length-t,a(s,"rowSpan",u),d.push(o.length-1)):d.push(t+u-1)),p(s);for(r(d,function(e){t<=e&&b++}),i=b;i<M;i++)e.appendChild(w(e.cells[m-1]));for(i=M;i<b;i++)s=e.cells[e.cells.length-1],(f=l(s,"colspan"))>1?a(s,"colSpan",f-1):L.remove(s);n?c.parentNode.insertBefore(e,c):c=L.insertAfter(e,c)}),u())},getPos:k,setStartCell:function(e){D=k(e)},setEndCell:function(e){var t,n,o,r,l,a,i,c,s,d;if(_=k(e),D&&_){for(t=Math.min(D.x,_.x),n=Math.min(D.y,_.y),l=o=Math.max(D.x,_.x),a=r=Math.max(D.y,_.y),d=n;d<=r;d++)for(s=t;s<=o;s++)(e=I[d][s]).real&&(i=e.colspan-1,c=e.rowspan-1,i&&s+i>l&&(l=s+i),c&&d+c>a&&(a=d+c));for(u(),d=n;d<=a;d++)for(s=t;s<=l;s++)I[d][s]&&L.setAttrib(I[d][s].elm,"data-mce-selected","1")}},moveRelIdx:function(e,t){var n,o,r;o=(n=k(e)).y*M+n.x;do{if(o+=t,!(r=h(o%M,Math.floor(o/M))))break;if(r.elm!=e)return E.select(r.elm,!0),L.isEmpty(r.elm)&&E.collapse(!0),!0}while(r.elm==e);return!1},refresh:m})}}),r("tinymce.plugins.table.selection.CellSelection",["tinymce.plugins.table.model.TableGrid","tinymce.core.dom.TreeWalker","tinymce.core.util.Tools"],function(e,t,n){return function(o,r){function l(e){o.getBody().style.webkitUserSelect="",(e||p)&&(o.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),p=!1)}function a(e,t){return!(!e||!t)&&e===g.getParent(t,"table")}function i(t){var n,l,i=t.target;if(!f&&!m&&i!==d&&(d=i,u&&s)){if(l=g.getParent(i,"td,th"),a(u,l)||(l=g.getParent(u,"td,th")),s===l&&!p)return;if(r(!0),a(u,l)){t.preventDefault(),c||(c=new e(o,u,s),o.getBody().style.webkitUserSelect="none"),c.setEndCell(l),p=!0,n=o.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(e){}}}}var c,s,u,d,f,m,g=o.dom,p=!0,b=function(){s=c=u=d=null,r(!1)};return o.on("SelectionChange",function(e){p&&e.stopImmediatePropagation()},!0),o.on("MouseDown",function(e){2==e.button||f||m||(l(),s=g.getParent(e.target,"td,th"),u=g.getParent(s,"table"))}),o.on("mouseover",i),o.on("remove",function(){g.unbind(o.getDoc(),"mouseover",i),l()}),o.on("MouseUp",function(){function e(e,o){var l=new t(e,e);do{if(3==e.nodeType&&0!==n.trim(e.nodeValue).length)return void(o?r.setStart(e,0):r.setEnd(e,e.nodeValue.length));if("BR"==e.nodeName)return void(o?r.setStartBefore(e):r.setEndBefore(e))}while(e=o?l.next():l.prev())}var r,l,a,i,u,d=o.selection;if(s){if(c&&(o.getBody().style.webkitUserSelect=""),(l=g.select("td[data-mce-selected],th[data-mce-selected]")).length>0){r=g.createRng(),i=l[0],r.setStartBefore(i),r.setEndAfter(i),e(i,1),a=new t(i,g.getParent(l[0],"table"));do{if("TD"==i.nodeName||"TH"==i.nodeName){if(!g.getAttrib(i,"data-mce-selected"))break;u=i}}while(i=a.next());e(u),d.setRng(r)}o.nodeChanged(),b()}}),o.on("KeyUp Drop SetContent",function(e){l("setcontent"==e.type),b(),f=!1}),o.on("ObjectResizeStart ObjectResized",function(e){f="objectresized"!=e.type}),o.on("dragstart",function(){m=!0}),o.on("drop dragend",function(){m=!1}),{clear:l}}}),r("tinymce.plugins.table.ui.Dialogs",["tinymce.core.util.Tools","tinymce.core.Env"],function(e,t){var n=e.each;return function(o){function r(){var e=o.settings.color_picker_callback;if(e)return function(){var t=this;e.call(o,function(e){t.value(e).fire("change")},t.value())}}function l(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){u(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:r()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:r()}]}]}}function a(e){return e?e.replace(/px$/,""):""}function i(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function c(e){n("left center right".split(" "),function(t){o.formatter.remove("align"+t,{},e)})}function s(t,n,o){function r(t,o){return o=o||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=r(e.menu):(t.value=e.value,n&&n(t)),o.push(t)}),o}return r(t,o||[])}function u(e,t,n){var o=t.toJSON(),r=e.parseStyle(o.style);n?(t.find("#borderColor").value(r["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(r["background-color"]||"")[0].fire("change")):(r["border-color"]=o.borderColor,r["background-color"]=o.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(r))))}function d(e,t,n){var o=e.parseStyle(e.getAttrib(n,"style"));o["border-color"]&&(t.borderColor=o["border-color"]),o["background-color"]&&(t.backgroundColor=o["background-color"]),t.style=e.serializeStyle(o)}var f=this;f.tableProps=function(){f.table(!0)},f.table=function(r){function f(){function r(e,t,n){if("TD"===e.tagName||"TH"===e.tagName)w.setStyle(e,t,n);else if(e.children)for(var o=0;o<e.children.length;o++)r(e.children[o],t,n)}var l;u(w,this),!1===(x=e.extend(x,this.toJSON())).class&&delete x.class,o.undoManager.transact(function(){if(g||(g=o.plugins.table.insertTable(x.cols||1,x.rows||1)),o.dom.setAttribs(g,{style:x.style,class:x.class}),o.settings.table_style_by_css){if((y=[]).push({name:"border",value:x.border}),y.push({name:"border-spacing",value:i(x.cellspacing)}),function(e,t,o){var r=e.parseStyle(e.getAttrib(t,"style"));n(o,function(e){r[e.name]=e.value}),e.setAttrib(t,"style",e.serializeStyle(e.parseStyle(e.serializeStyle(r))))}(w,g,y),w.setAttribs(g,{"data-mce-border-color":x.borderColor,"data-mce-cell-padding":x.cellpadding,"data-mce-border":x.border}),g.children)for(var e=0;e<g.children.length;e++)r(g.children[e],"border",x.border),r(g.children[e],"padding",i(x.cellpadding))}else o.dom.setAttribs(g,{border:x.border,cellpadding:x.cellpadding,cellspacing:x.cellspacing});w.getAttrib(g,"width")&&!o.settings.table_style_by_css?w.setAttrib(g,"width",a(x.width)):w.setStyle(g,"width",i(x.width)),w.setStyle(g,"height",i(x.height)),(l=w.select("caption",g)[0])&&!x.caption&&w.remove(l),!l&&x.caption&&((l=w.create("caption")).innerHTML=t.ie?" ":'<br data-mce-bogus="1"/>',g.insertBefore(l,g.firstChild)),x.printFull||w.removeClass(g,"column-span-all"),x.printFull&&w.addClass(g,"column-span-all"),!l&&x.caption&&((l=w.create("caption")).innerHTML=t.ie?" ":'<br data-mce-bogus="1"/>',g.insertBefore(l,g.firstChild)),c(g),x.align&&o.formatter.apply("align"+x.align,{},g),o.focus(),o.addVisual()})}function m(e,t){var n;return n=function(e,n){for(var o=0;o<n.length;o++){var r=w.getStyle(n[o],t);if(void 0===e&&(e=r),e!=r)return""}return e}(n,o.dom.select("td,th",e))}var g,p,b,h,v,y,w=o.dom,x={};!0===r?(g=w.getParent(o.selection.getStart(),"table"))&&(x={width:a(w.getStyle(g,"width")||w.getAttrib(g,"width")),height:a(w.getStyle(g,"height")||w.getAttrib(g,"height")),cellspacing:a(w.getStyle(g,"border-spacing")||w.getAttrib(g,"cellspacing")),cellpadding:w.getAttrib(g,"data-mce-cell-padding")||w.getAttrib(g,"cellpadding")||m(g,"padding"),border:w.getAttrib(g,"data-mce-border")||w.getAttrib(g,"border")||m(g,"border"),borderColor:w.getAttrib(g,"data-mce-border-color"),caption:!!w.select("caption",g)[0],printFull:w.hasClass(g,"column-span-all"),class:w.getAttrib(g,"class")},n("left center right".split(" "),function(e){o.formatter.matchNode(g,"align"+e)&&(x.align=e)})):(p={label:"Cols",name:"cols"},b={label:"Rows",name:"rows"}),o.settings.table_class_list&&(x.class&&(x.class=x.class.replace(/\s*mce\-item\-table\s*/g,"")),h={name:"class",type:"listbox",label:"Class",values:s(o.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"table",classes:[e.value]})})})}),v={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==o.settings.table_appearance_options?[p,b,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"},{label:"Fullbredd i tryck",name:"printFull",type:"checkbox"}]:[p,b,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},h]},!1!==o.settings.table_advtab?(d(w,x,g),o.windowManager.open({title:"Table properties",data:x,bodyType:"tabpanel",body:[{title:"General",type:"form",items:v},l(w)],onsubmit:f})):o.windowManager.open({title:"Table properties",data:x,body:v,onsubmit:f})},f.merge=function(e,t){o.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();o.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})},f.cell=function(){function t(e,t,n){(1===h.length||n)&&b.setAttrib(e,t,n)}function r(e,t,n){(1===h.length||n)&&b.setStyle(e,t,n)}function f(){u(b,this),g=e.extend(g,this.toJSON()),o.undoManager.transact(function(){n(h,function(e){t(e,"scope",g.scope),t(e,"style",g.style),t(e,"class",g.class),r(e,"width",i(g.width)),r(e,"height",i(g.height)),g.type&&e.nodeName.toLowerCase()!==g.type&&(e=b.rename(e,g.type)),1===h.length&&(c(e),function(e){n("top middle bottom".split(" "),function(t){o.formatter.remove("valign"+t,{},e)})}(e)),g.align&&o.formatter.apply("align"+g.align,{},e),g.valign&&o.formatter.apply("valign"+g.valign,{},e)}),o.focus()})}var m,g,p,b=o.dom,h=[];if(h=o.dom.select("td[data-mce-selected],th[data-mce-selected]"),m=o.dom.getParent(o.selection.getStart(),"td,th"),!h.length&&m&&h.push(m),m=m||h[0]){h.length>1?g={width:"",height:"",scope:"",class:"",align:"",style:"",type:m.nodeName.toLowerCase()}:((g={width:a(b.getStyle(m,"width")||b.getAttrib(m,"width")),height:a(b.getStyle(m,"height")||b.getAttrib(m,"height")),scope:b.getAttrib(m,"scope"),class:b.getAttrib(m,"class")}).type=m.nodeName.toLowerCase(),n("left center right".split(" "),function(e){o.formatter.matchNode(m,"align"+e)&&(g.align=e)}),n("top middle bottom".split(" "),function(e){o.formatter.matchNode(m,"valign"+e)&&(g.valign=e)}),d(b,g,m)),o.settings.table_cell_class_list&&(p={name:"class",type:"listbox",label:"Class",values:s(o.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"td",classes:[e.value]})})})});var v={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},p]};!1!==o.settings.table_cell_advtab?o.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:g,body:[{title:"General",type:"form",items:v},l(b)],onsubmit:f}):o.windowManager.open({title:"Cell properties",data:g,body:v,onsubmit:f})}},f.row=function(){function t(e,t,n){(1===y.length||n)&&v.setAttrib(e,t,n)}function r(){var r,l,a;u(v,this),b=e.extend(b,this.toJSON()),o.undoManager.transact(function(){var e=b.type;n(y,function(n){t(n,"scope",b.scope),t(n,"style",b.style),t(n,"class",b.class),function(e,t,n){(1===y.length||n)&&v.setStyle(e,t,n)}(n,"height",i(b.height)),e!==n.parentNode.nodeName.toLowerCase()&&(r=v.getParent(n,"table"),l=n.parentNode,(a=v.select(e,r)[0])||(a=v.create(e),r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a)),a.appendChild(n),l.hasChildNodes()||v.remove(l)),1===y.length&&c(n),b.align&&o.formatter.apply("align"+b.align,{},n)}),o.focus()})}var f,m,g,p,b,h,v=o.dom,y=[];f=o.dom.getParent(o.selection.getStart(),"table"),m=o.dom.getParent(o.selection.getStart(),"td,th"),n(f.rows,function(e){n(e.cells,function(t){if(v.getAttrib(t,"data-mce-selected")||t==m)return y.push(e),!1})}),(g=y[0])&&(y.length>1?b={height:"",scope:"",class:"",align:"",type:g.parentNode.nodeName.toLowerCase()}:((b={height:a(v.getStyle(g,"height")||v.getAttrib(g,"height")),scope:v.getAttrib(g,"scope"),class:v.getAttrib(g,"class")}).type=g.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),function(e){o.formatter.matchNode(g,"align"+e)&&(b.align=e)}),d(v,b,g)),o.settings.table_row_class_list&&(p={name:"class",type:"listbox",label:"Class",values:s(o.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"tr",classes:[e.value]})})})}),h={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},p]},!1!==o.settings.table_row_advtab?o.windowManager.open({title:"Row properties",data:b,bodyType:"tabpanel",body:[{title:"General",type:"form",items:h},l(v)],onsubmit:r}):o.windowManager.open({title:"Row properties",data:b,body:h,onsubmit:r}))}}}),r("tinymce.plugins.table.ui.ResizeBars",["tinymce.core.util.Tools","tinymce.core.util.VK"],function(e,t){var n;return function(o){function r(e,t){return{index:e,y:o.dom.getPos(t).y}}function l(e,t){return{index:e,x:o.dom.getPos(t).x}}function a(e,t){return{index:e,x:o.dom.getPos(t).x+t.offsetWidth}}function i(){return"rtl"===o.getBody().dir}function c(){return function(){return o.inline}?o.getBody().ownerDocument.body:o.getBody()}function s(e,t){return i()?a(e,t):l(e,t)}function u(e,t){var n=o.dom.getStyle(e,t,!0);return parseInt(n,10)}function d(e){return u(e,"width")/u(e.parentElement,"width")*100}function f(e,t,n){for(var o=[],r=1;r<n.length;r++){var l=n[r].element;o.push(e(r-1,l))}var a=n[n.length-1];return o.push(t(n.length-1,a.element)),o}function m(){var t=o.dom.select("."+$,c());e.each(t,function(e){o.dom.remove(e)})}function g(e){m(),C(e)}function p(e,t,n,o,r,l,a,i){var c={"data-mce-bogus":"all",class:$+" "+e,unselectable:"on","data-mce-resize":!1,style:"cursor: "+t+"; margin: 0; padding: 0; position: absolute; left: "+n+"px; top: "+o+"px; height: "+r+"px; width: "+l+"px; "};return c[a]=i,c}function b(t){return e.map(t.rows,function(t){return{element:t,cells:e.map(t.cells,function(e){return{element:e,rowspan:e.hasAttribute("rowspan")?parseInt(e.getAttribute("rowspan"),10):1,colspan:e.hasAttribute("colspan")?parseInt(e.getAttribute("colspan"),10):1}})}})}function h(t){function n(e,t){return e+","+t}var o={},r=[],l=0,a=0;return e.each(t,function(t,i){var c=[];e.each(t.cells,function(e){for(var t=0;void 0!==o[n(i,t)];)t++;for(var r={element:e.element,colspan:e.colspan,rowspan:e.rowspan,rowIndex:i,colIndex:t},s=0;s<e.colspan;s++)for(var u=0;u<e.rowspan;u++){var d=i+u,f=t+s;o[n(d,f)]=r,l=Math.max(l,d+1),a=Math.max(a,f+1)}c.push(r)}),r.push({element:t.element,cells:c})}),{grid:{maxRows:l,maxCols:a},getAt:function(e,t){return o[n(e,t)]},getAllCells:function(){var t=[];return e.each(r,function(e){t=t.concat(e.cells)}),t},getAllRows:function(){return r}}}function v(e,t){for(var n=[],o=e;o<t;o++)n.push(o);return n}function y(e,t,n){for(var o,r=e(),l=0;l<r.length;l++)t(r[l])&&(o=r[l]);return o||n()}function w(t){var n=v(0,t.grid.maxCols),o=v(0,t.grid.maxRows);return e.map(n,function(e){return y(function(){for(var n=[],r=0;r<o.length;r++){var l=t.getAt(r,e);l&&l.colIndex===e&&n.push(l)}return n},function(e){return 1===e.colspan},function(){for(var n,r=0;r<o.length;r++)if(n=t.getAt(r,e))return n;return null})})}function x(t){var n=v(0,t.grid.maxCols),o=v(0,t.grid.maxRows);return e.map(o,function(e){return y(function(){for(var o=[],r=0;r<n.length;r++){var l=t.getAt(e,r);l&&l.rowIndex===e&&o.push(l)}return o},function(e){return 1===e.rowspan},function(){return t.getAt(e,0)})})}function C(t){var n=h(b(t)),u=x(n),d=w(n),m=o.dom.getPos(t),g=u.length>0?f(r,function(e,t){return{index:e,y:o.dom.getPos(t).y+t.offsetHeight}},u):[],v=d.length>0?f(s,function(e,t){return i()?l(e,t):a(e,t)},d):[];!function(t,n,r){e.each(t,function(e){var t=r.x,l=e.y-ne/2,a=ne,i=n;o.dom.add(c(),"div",p(X,Y,t,l,a,i,J,e.index))})}(g,t.offsetWidth,m),function(t,n,r){e.each(t,function(e){var t=e.x-ne/2,l=r.y,a=n,i=ne;o.dom.add(c(),"div",p(Q,Z,t,l,a,i,ee,e.index))})}(v,t.offsetHeight,m)}function S(e,t,n,o){if(t<0||t>=e.length-1)return"";var r=e[t];if(r)r={value:r,delta:0};else for(var l=e.slice(0,t).reverse(),a=0;a<l.length;a++)l[a]&&(r={value:l[a],delta:a+1});var i=e[t+1];if(i)i={value:i,delta:1};else for(var c=e.slice(t+1),s=0;s<c.length;s++)c[s]&&(i={value:c[s],delta:s+1});var d=i.delta-r.delta,f=Math.abs(i.value-r.value)/d;return n?f/u(o,"width")*100:f}function T(e,t){var n=o.dom.getStyle(e,t);return n||(n=o.dom.getAttrib(e,t)),n||(n=o.dom.getStyle(e,t,!0)),n}function A(t,n,o){for(var r=w(t),l=e.map(r,function(e){return s(e.colIndex,e.element).x}),a=[],i=0;i<r.length;i++){var c=(r[i].element.hasAttribute("colspan")?parseInt(r[i].element.getAttribute("colspan"),10):1)>1?S(l,i):function(e,t,n){var o=T(e,"width"),r=parseInt(o,10),l=t?function(e,t){return u(e,"width")/u(t,"width")*100}(e,n):u(e,"width");return(t&&!M(o)||!t&&!D(o))&&(r=0),!isNaN(r)&&r>0?r:l}(r[i].element,n,o);c=c||oe,a.push(c)}return a}function R(t){for(var n=x(t),o=e.map(n,function(e){return r(e.rowIndex,e.element).y}),l=[],a=0;a<n.length;a++){var i=(n[a].element.hasAttribute("rowspan")?parseInt(n[a].element.getAttribute("rowspan"),10):1)>1?S(o,a):function(e){var t=T(e,"height"),n=parseInt(t,10);return M(t)&&(n=0),!isNaN(n)&&n>0?n:u(e,"height")}(n[a].element);i=i||re,l.push(i)}return l}function P(t,n,o,r,l){function a(t){return e.map(t,function(){return 0})}function i(e,t){var n,l=a(c.slice(0,e)),i=a(c.slice(t+1));if(o>=0){var s=Math.max(r,c[t]-o);n=l.concat([o,s-c[t]]).concat(i)}else{var u=Math.max(r,c[e]+o),d=c[e]-u;n=l.concat([u-c[e],d]).concat(i)}return n}var c=t.slice(0);return 0===t.length?[]:1===t.length?function(){var e;e=l?[100-c[0]]:[Math.max(r,c[0]+o)-c[0]];return e}():0===n?i(0,1):n>0&&n<t.length-1?i(n,n+1):n===t.length-1?function(e,t){var n,l=a(c.slice(0,t));if(o>=0)n=l.concat([o]);else{var i=Math.max(r,c[t]+o);n=l.concat([i-c[t]])}return n}(0,n):[]}function N(e,t,n){for(var o=0,r=e;r<t;r++)o+=n[r];return o}function B(t,n){var o=t.getAllCells();return e.map(o,function(e){var t=N(e.colIndex,e.colIndex+e.colspan,n);return{element:e.element,width:t,colspan:e.colspan}})}function k(t,n){var o=t.getAllCells();return e.map(o,function(e){var t=N(e.rowIndex,e.rowIndex+e.rowspan,n);return{element:e.element,height:t,rowspan:e.rowspan}})}function I(t,n){var o=t.getAllRows();return e.map(o,function(e,t){return{element:e.element,height:n[t]}})}function M(e){return ae.test(e)}function D(e){return ie.test(e)}function _(t,n,r){for(var l=h(b(t)),a=M(t.width)||M(t.style.width),i=A(l,a,t),c=a?function(e,t){return t/u(e,"width")*100}(t,n):n,s=P(i,r,c,oe,a),f=[],m=0;m<s.length;m++)f.push(s[m]+i[m]);var g=B(l,f),p=a?"%":"px",v=a?r<l.grid.maxCols-1?d(t):d(t)+function(e,t){return t/u(e.parentElement,"width")*100}(t,n):r<l.grid.maxCols-1?u(t,"width"):u(t,"width")+n;o.undoManager.transact(function(){!function(t,n){e.each(t,function(e){o.dom.setStyle(e.element,"width",e.width+n),o.dom.setAttrib(e.element,"width",null)})}(g,p),function(e,n,a){r!=l.grid.maxCols-1&&a||(o.dom.setStyle(t,"width",e+n),o.dom.setAttrib(t,"width",null))}(v,p,a)})}function E(t,n,r){for(var l=h(b(t)),a=R(l),i=[],c=0,s=0;s<a.length;s++)i.push(s===r?n+a[s]:a[s]),c+=c[s];var u=k(l,i),d=I(l,i);o.undoManager.transact(function(){e.each(d,function(e){o.dom.setStyle(e.element,"height",e.height+"px"),o.dom.setAttrib(e.element,"height",null)}),e.each(u,function(e){o.dom.setStyle(e.element,"height",e.height+"px"),o.dom.setAttrib(e.element,"height",null)}),o.dom.setStyle(t,"height",c+"px"),o.dom.setAttrib(t,"height",null)})}function L(){if(o.dom.remove(U),K){o.dom.removeClass(G,le),K=!1;var e,t;if(H(G)){var r=parseInt(o.dom.getAttrib(G,te),10),l=o.dom.getPos(G).x;e=parseInt(o.dom.getAttrib(G,ee),10),t=i()?r-l:l-r,Math.abs(t)>=1&&_(n,t,e)}else if(W(G)){var a=parseInt(o.dom.getAttrib(G,q),10),c=o.dom.getPos(G).y;e=parseInt(o.dom.getAttrib(G,J),10),t=c-a,Math.abs(t)>=1&&E(n,t,e)}g(n),o.nodeChanged()}}function z(e,t){U=U||function(){var e=document.createElement("div");return e.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),e.setAttribute("data-mce-bogus","all"),e}(),K=!0,o.dom.addClass(e,le),G=e,function(e,t){o.dom.bind(e,"mouseup",function(){L()}),o.dom.bind(e,"mousemove",function(e){clearTimeout(O),K&&t(e)}),o.dom.bind(e,"mouseout",function(){O=setTimeout(function(){L()},200)})}(U,t),o.dom.add(c(),U)}function H(e){return o.dom.hasClass(e,Q)}function W(e){return o.dom.hasClass(e,X)}function V(e){var t=e.target,r=o.getBody();if(o.$.contains(r,n)||n===r)if(H(t)){e.preventDefault();var l=o.dom.getPos(t).x;o.dom.setAttrib(t,te,l),function(e){j=void 0,z(e,function(e){j=void 0!==j?j:e.clientX;var t=e.clientX-j;j=e.clientX;var n=o.dom.getPos(G).x;o.dom.setStyle(G,"left",n+t+"px")})}(t)}else if(W(t)){e.preventDefault();var a=o.dom.getPos(t).y;o.dom.setAttrib(t,q,a),function(e){F=void 0,z(e,function(e){F=void 0!==F?F:e.clientY;var t=e.clientY-F;F=e.clientY;var n=o.dom.getPos(G).y;o.dom.setStyle(G,"top",n+t+"px")})}(t)}else m()}var O,K,U,G,j,F,$="mce-resize-bar",X="mce-resize-bar-row",Y="row-resize",J="data-row",q="data-initial-top",Q="mce-resize-bar-col",Z="col-resize",ee="data-col",te="data-initial-left",ne=4,oe=10,re=10,le="mce-resize-bar-dragging",ae=new RegExp(/(\d+(\.\d+)?%)/),ie=new RegExp(/px|em/);return o.on("init",function(){o.dom.bind(c(),"mousedown",V)}),o.on("ObjectResized",function(t){var n=t.target;if("TABLE"===n.nodeName){var r=[];e.each(n.rows,function(t){e.each(t.cells,function(e){var t=o.dom.getStyle(e,"width",!0);r.push({cell:e,width:t})})}),e.each(r,function(e){o.dom.setStyle(e.cell,"width",e.width),o.dom.setAttrib(e.cell,"width",null)})}}),o.on("mouseover",function(e){if(!K){var t=o.dom.getParent(e.target,"table");("TABLE"===e.target.nodeName||t)&&(n=t,g(t))}}),o.on("keydown",function(e){switch(e.keyCode){case t.LEFT:case t.RIGHT:case t.UP:case t.DOWN:m()}}),o.on("remove",function(){m(),o.dom.unbind(c(),"mousedown",V)}),{adjustWidth:_,adjustHeight:E,clearBars:m,drawBars:C,determineDeltas:P,getTableGrid:h,getTableDetails:b,getWidths:A,getPixelHeights:R,isPercentageBasedSize:M,isPixelBasedSize:D,recalculateWidths:B,recalculateCellHeights:k,recalculateRowHeights:I}}}),r("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),r("tinymce.plugins.table.util.Quirks",["tinymce.core.util.VK","tinymce.core.util.Delay","tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.table.util.Utils"],function(e,t,n,o,r){var l=o.each,a=r.getSpanVal;return function(i){function c(){i.on("KeyDown",function(e){var t,n,o=i.dom;37!=e.keyCode&&38!=e.keyCode||(t=i.selection.getRng(),(n=o.getParent(t.startContainer,"table"))&&i.getBody().firstChild==n&&function(e,t){var n,o=t.ownerDocument,r=o.createRange();return r.setStartBefore(t),r.setEnd(e.endContainer,e.endOffset),(n=o.createElement("body")).appendChild(r.cloneContents()),0===n.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}(t,n)&&((t=o.createRng()).setStartBefore(n),t.setEndBefore(n),i.selection.setRng(t),e.preventDefault()))})}function s(){i.on("KeyDown SetContent VisualAid",function(){var e;for(e=i.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(e.nodeValue.length>0)break}else if(1==e.nodeType&&("BR"==e.tagName||!e.getAttribute("data-mce-bogus")))break;e&&"TABLE"==e.nodeName&&(i.settings.forced_root_block?i.dom.add(i.getBody(),i.settings.forced_root_block,i.settings.forced_root_block_attrs,n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):i.dom.add(i.getBody(),"br",{"data-mce-bogus":"1"}))}),i.on("PreProcess",function(e){var t=e.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||" "==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&i.dom.remove(t)})}!function(){var t=function(e){return i.dom.isEmpty(e)||e.firstChild===e.lastChild&&o(e.firstChild)},n=function(e,t){var n=t.firstChild;do{if(n===e)return!0}while(n=n.firstChild);return!1},o=function(e){if(3===e.nodeType){if("\ufeff"===e.data)return!0;e=e.parentNode}return 1===e.nodeType&&e.hasAttribute("data-mce-caret")},r=function(e,n){var r=e.lastChild,l=i.selection.getRng(),a=l.startContainer,c=l.startOffset;t(e)?(e.innerHTML="\ufeff",a=e.lastChild,c=0):o(r)||function(e,t){var n;n=t?i.dom.create("p",{"data-mce-caret":"after","data-mce-bogus":"all"},'<br data-mce-bogus="1">'):e.ownerDocument.createTextNode("\ufeff"),e.appendChild(n)}(e,i.dom.isBlock(r)),i.selection.setCursorLocation(a,c)};i.on("keydown",function(o){if(!(o.keyCode!==e.DELETE&&o.keyCode!==e.BACKSPACE||o.isDefaultPrevented())){var l=i.dom.getParent(i.selection.getStart(),"caption");(function(e){return e&&"CAPTION"==e.nodeName&&"TABLE"==e.parentNode.nodeName})(l)&&(i.selection.isCollapsed()?(r(l),(t(l)||o.keyCode===e.BACKSPACE&&function(e){var t=i.selection.getRng();return!t.startOffset&&!t.startContainer.previousSibling&&n(t.startContainer,e)}(l))&&o.preventDefault()):(function(e){var t=i.selection.getRng(),o=i.dom.createRng(),r=e.firstChild;t.commonAncestorContainer===e.parentNode&&n(t.startContainer,e)&&(o.setStart(e,0),1===r.nodeType?o.setEnd(e,e.childNodes.length):o.setEnd(r,r.nodeValue.length),i.selection.setRng(o))}(l),i.undoManager.transact(function(){i.execCommand("Delete"),r(l)}),o.preventDefault()))}})}(),function(){function t(e){i.selection.select(e,!0),i.selection.collapse(!0)}function n(e){i.$(e).empty(),r.paddCell(e)}i.on("keydown",function(r){if((r.keyCode==e.DELETE||r.keyCode==e.BACKSPACE)&&!r.isDefaultPrevented()){var l,a,c,s;if(l=i.dom.getParent(i.selection.getStart(),"table")){if(a=i.dom.select("td,th",l),0===(c=o.grep(a,function(e){return!!i.dom.getAttrib(e,"data-mce-selected")})).length)return s=i.dom.getParent(i.selection.getStart(),"td,th"),void(i.selection.isCollapsed()&&s&&i.dom.isEmpty(s)&&(r.preventDefault(),n(s),t(s)));r.preventDefault(),i.undoManager.transact(function(){a.length==c.length?i.execCommand("mceTableDelete"):(o.each(c,n),t(c[0]))})}}})}(),n.webkit&&(i.on("KeyDown",function(n){!function(n){function o(e,t){var l=e?"previousSibling":"nextSibling",a=i.dom.getParent(t,"tr"),u=a[l];if(u)return s(0,t,u,e),n.preventDefault(),!0;var d=i.dom.getParent(a,"table"),f=a.parentNode,m=f.nodeName.toLowerCase();if("tbody"===m||m===(e?"tfoot":"thead")){var g=function(e,t,n,o){var r=i.dom.select(">"+o,t),l=r.indexOf(n);if(e&&0===l||!e&&l===r.length-1)return function(e,t){var n=e?"thead":"tfoot",o=i.dom.select(">"+n,t);return 0!==o.length?o[0]:null}(e,t);if(-1===l){var a="thead"===n.tagName.toLowerCase()?0:r.length-1;return r[a]}return r[l+(e?-1:1)]}(e,d,f,"tbody");if(null!==g)return function(e,t,o){var l=r(t,e);return l&&s(0,o,l,e),n.preventDefault(),!0}(e,g,t)}return function(e,t,l,a){var s=a[l];if(s)return c(s),!0;var u=i.dom.getParent(a,"td,th");return u?o(e,u):(c(r(t,!e)),n.preventDefault(),!1)}(e,a,l,d)}function r(e,t){var n=e&&e[t?"lastChild":"firstChild"];return n&&"BR"===n.nodeName?i.dom.getParent(n,"td,th"):n}function c(e){i.selection.setCursorLocation(e,0)}function s(e,t,n,o){var s=function(e,t){var n=0,o=0;return l(e.children,function(e,r){if(n+=a(e,"colspan"),o=r,n>t)return!1}),o}(n,function(e){for(var n=0,o=i.dom.getParent(t,"td,th");o.previousSibling;)o=o.previousSibling,n+=a(o,"colspan");return n}()),u=n.childNodes[s];c(r(u,o)||u)}var u=n.keyCode;if((u==e.UP||u==e.DOWN)&&function(e){var t=e.selection.getNode();return null!==e.dom.getParent(t,"tr")}(i)){var d=i.selection.getNode();t.setEditorTimeout(i,function(){(function(e){var t=i.selection.getNode(),n=i.dom.getParent(t,"td,th"),o=i.dom.getParent(e,"td,th");return n&&n!==o&&function(e,t){return i.dom.getParent(e,"TABLE")===i.dom.getParent(t,"TABLE")}(n,o)})(d)&&o(!n.shiftKey&&u===e.UP,d)},0)}}(n)}),function(){function e(){var e=i.selection.getRng(),t=i.selection.getNode(),n=i.dom.getParent(e.startContainer,"TD,TH");if(function(e,t,n,o){var r,l,a,c=i.dom.getParent(t.startContainer,"TABLE");return c&&(r=c.parentNode),l=3==t.startContainer.nodeType&&0===t.startOffset&&0===t.endOffset&&o&&("TR"==n.nodeName||n==r),a=("TD"==n.nodeName||"TH"==n.nodeName)&&!o,l||a}(0,e,t,n)){n||(n=t);for(var o=n.lastChild;o.lastChild;)o=o.lastChild;3==o.nodeType&&(e.setEnd(o,o.data.length),i.selection.setRng(e))}}i.on("KeyDown",function(){e()}),i.on("MouseDown",function(t){2!=t.button&&e()})}()),n.gecko&&(c(),s()),n.ie>9&&(c(),s())}}),r("tinymce.plugins.table.Plugin",["tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.PluginManager","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.table.model.TableGrid","tinymce.plugins.table.selection.CellSelection","tinymce.plugins.table.ui.Dialogs","tinymce.plugins.table.ui.ResizeBars","tinymce.plugins.table.util.Quirks"],function(e,t,n,o,r,l,a,i,c,s){var u=o.each;return n.add("table",function(e){function n(t){return function(){e.execCommand(t)}}function o(n,o){var r,l,a,i;for(a='<table class="table" id="__mce"><thead class="table__header"><tr><td colspan='+n+'>Ange tabellrubrik här</td></tr></thead><tbody><tr class="table__subheader"><td colspan='+n+">Ange tabellbeskrivning här </td></tr>",r=0;r<o;r++){for(a+="<tr>",l=0;l<n;l++)a+="<td>"+(t.ie&&t.ie<10?"&nbsp;":"<br>")+"</td>";a+="</tr>"}return a+="</tbody></table>",e.undoManager.transact(function(){e.insertContent(a),i=e.dom.get("__mce"),e.dom.setAttrib(i,"id",null),e.$("tr",i).each(function(t,n){e.fire("newrow",{node:n}),e.$("th,td",n).each(function(t,n){e.fire("newcell",{node:n})})}),e.dom.setAttribs(i,e.settings.table_default_attributes||{}),e.dom.setStyles(i,e.settings.table_default_styles||{})}),i}function d(t,n,o){function r(){var r,l,a,i={},c=0;(r=(l=e.dom.select("td[data-mce-selected],th[data-mce-selected]"))[0])||(r=e.selection.getStart()),o&&l.length>0?(u(l,function(e){return i[e.parentNode.parentNode.nodeName]=1}),u(i,function(e){c+=e}),a=1!==c):a=!e.dom.getParent(r,n),t.disabled(a),e.selection.selectorChanged(n,function(e){t.disabled(!e)})}e.initialized?r():e.on("init",r)}function f(){d(this,"table")}function m(){d(this,"td,th")}function g(t,n,o){var r,l,a,i,c,s=o.getEl().getElementsByTagName("table")[0],u=o.isRtl()||"tl-tr"==o.parent().rel;for(s.nextSibling.innerHTML=t+1+" x "+(n+1),u&&(t=9-t),l=0;l<10;l++)for(r=0;r<10;r++)i=s.rows[l].childNodes[r].firstChild,c=(u?r>=t:r<=t)&&l<=n,e.dom.toggleClass(i,"mce-active",c),c&&(a=i);return a.parentNode}var p,b,h=this,v=new i(e);!e.settings.object_resizing||!1===e.settings.table_resize_bars||!0!==e.settings.object_resizing&&"table"!==e.settings.object_resizing||(b=c(e)),!1===e.settings.table_grid?e.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",onclick:v.table}):e.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),v.table())},onshow:function(){g(0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active"),e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,o=e.target;"A"==o.tagName.toUpperCase()&&(t=parseInt(o.getAttribute("data-mce-x"),10),n=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),t===this.lastX&&n===this.lastY||(g(t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(t){var n=this;"A"==t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),n.parent().cancel(),e.undoManager.transact(function(){o(n.lastX+1,n.lastY+1)}),e.addVisual())}}]}),e.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:f,onclick:v.tableProps}),e.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:f,cmd:"mceTableDelete"}),e.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:n("mceTableCellProps"),onPostRender:m},{text:"Merge cells",onclick:n("mceTableMergeCells"),onPostRender:function(){d(this,"td,th",!0)}},{text:"Split cell",onclick:n("mceTableSplitCells"),onPostRender:m}]}),e.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:n("mceTableInsertRowBefore"),onPostRender:m},{text:"Insert row after",onclick:n("mceTableInsertRowAfter"),onPostRender:m},{text:"Delete row",onclick:n("mceTableDeleteRow"),onPostRender:m},{text:"Row properties",onclick:n("mceTableRowProps"),onPostRender:m},{text:"-"},{text:"Cut row",onclick:n("mceTableCutRow"),onPostRender:m},{text:"Copy row",onclick:n("mceTableCopyRow"),onPostRender:m},{text:"Paste row before",onclick:n("mceTablePasteRowBefore"),onPostRender:m},{text:"Paste row after",onclick:n("mceTablePasteRowAfter"),onPostRender:m}]}),e.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:n("mceTableInsertColBefore"),onPostRender:m},{text:"Insert column after",onclick:n("mceTableInsertColAfter"),onPostRender:m},{text:"Delete column",onclick:n("mceTableDeleteCol"),onPostRender:m}]});var y=[];u("inserttable tableprops deletetable | cell row column".split(" "),function(t){"|"==t?y.push({text:"-"}):y.push(e.menuItems[t])}),e.addButton("table",{type:"menubutton",title:"Table",menu:y}),t.isIE||e.on("click",function(t){"TABLE"===(t=t.target).nodeName&&(e.selection.select(t),e.nodeChanged())}),h.quirks=new s(e),e.on("Init",function(){h.cellSelection=new a(e,function(e){e&&b&&b.clearBars()}),h.resizeBars=b}),e.on("PreInit",function(){e.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})}),u({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(t){var n;n=e.dom.getParent(e.selection.getStart(),"th,td"),e.dom.select("td[data-mce-selected],th[data-mce-selected]").length?t.merge():v.merge(t,n)},mceTableInsertRowBefore:function(e){e.insertRows(!0)},mceTableInsertRowAfter:function(e){e.insertRows()},mceTableInsertColBefore:function(e){e.insertCols(!0)},mceTableInsertColAfter:function(e){e.insertCols()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){p=e.cutRows()},mceTableCopyRow:function(e){p=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(p,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(p)},mceSplitColsBefore:function(e){e.splitCols(!0)},mceSplitColsAfter:function(e){e.splitCols(!1)},mceTableDelete:function(e){b&&b.clearBars(),e.deleteTable()}},function(t,n){e.addCommand(n,function(){var n=new l(e);n&&(t(n),e.execCommand("mceRepaint"),h.cellSelection.clear())})}),u({mceInsertTable:v.table,mceTableProps:function(){v.table(!0)},mceTableRowProps:v.row,mceTableCellProps:v.cell},function(t,n){e.addCommand(n,function(e,n){t(n)})}),e.addButton("tableprops",{title:"Table properties",onclick:v.tableProps,icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")}),function(){var t=e.settings.table_toolbar;""!==t&&!1!==t&&(t||(t="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),e.addContextToolbar(function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},t))}(),!1!==e.settings.table_tab_navigation&&e.on("keydown",function(t){var n,o,a,i=e.selection.getStart();if(t.keyCode===r.TAB){if(e.dom.getParent(i,"LI,DT,DD"))return;(n=e.dom.getParent(i,"th,td"))&&(t.preventDefault(),o=new l(e),a=t.shiftKey?-1:1,e.undoManager.transact(function(){!o.moveRelIdx(n,a)&&a>0&&(o.insertRow(),o.refresh(),o.moveRelIdx(n,a))}))}}),h.insertTable=o,h.setClipboardRows=function(e){p=e},h.getClipboardRows=function(){return p}}),function(){}}),n("tinymce.plugins.table.Plugin")()}();